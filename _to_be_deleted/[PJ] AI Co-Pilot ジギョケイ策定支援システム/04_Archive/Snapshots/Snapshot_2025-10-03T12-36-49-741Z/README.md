# AI Co-Pilotシステム 開発方針書 (README)

## 1. 概要
本ドキュメントは、「AI Co-Pilot ジギョケイ策定支援システム」の開発における、各コンポーネントの役割分担と基本アーキテクチャを定義するものである。開発中の仕様確認や方針変更時の判断基準として利用する。

## 2. 基本アーキテクチャ：役割分担
本システムは、**現場での即時性と快適な操作性**を担う「タブレット（クライアントサイド）」と、**重い分析処理と創造的な生成**を担う「クラウド（サーバーサイドAI）」の明確な役割分担に基づき構築される。

| 項目 | タブレット (Co-Pilot App) | クラウド (AI Engine) |
| :--- | :--- | :--- |
| **基本役割** | **現場のナビゲーター＆書記** | **分析と創造を担う思考エンジン** |
| **音声認識** | マイクで音声を拾い、クラウドへ送信 | **[音声認識AI]** 音声データをリアルタイムでテキストに変換し、タブレットに返す |
| **会話ログ** | **セッション中、一時的に保持**するが、終了後に消去 | **最終分析の時だけ**、120分間の全ログを受け取る |
| **リスクの蓄積** | AIからの通知を受け、**リスクのリストをアプリ内に蓄積**する | 会話の中からリスクを**検知**し、タブレットに通知する |
| **画面表示の判断** | **蓄積したリスクリスト**や、AIから受信した情報を基に、何をどう表示するか最終判断する | 分析結果やインサイト情報を**「素材」**としてタブレットに提供する |
| **オンライン通信** | 音声認識のために**常時接続**している | **スポット接続**。インサイト表示や最終分析など、必要な時にだけ呼び出される |
| **JSONファイルの生成と保管** | JSONを生成・保管する機能は持たない | 最終的な分析結果の**JSONを生成**し、**Google Cloud Storageに保管**する |
| **フォトジェニックなレポート作成**| 作成のリクエストを送信するだけ | 最終JSONを基に、美しいデザインの**PDFを生成**する |
| **応答速度の体感** | **常にサクサク動く**。ユーザーの操作に即座に反応する | 最終分析の時だけ、**10〜30秒の「思考時間」**が発生する |

---

## 3. Q&A：詳細仕様

#### Q1. 会話ログデータはタブレットに残るのか？
**A:** いいえ、**原則としてタブレットには永続的に保存しません。** セッション終了後、データは分析のためにクラウドに送信され、アプリからは安全に消去されます。

#### Q2. AIとは必要な時だけオンライン通信し、それ以外は通信していないのか？
**A:** はい、概ねその通りです。ただし、**通信には大小2種類**あります。
- **常時接続（細い通信）：** 会話をリアルタイムで文字起こしする「音声認識AI」とは常に通信します。
- **スポット接続（太い通信）：** 会話ログ全体を分析する「思考エンジンAI (Gemini)」とは、**最終分析の時にだけ**通信します。

#### Q3. いまリスクは？と尋ねた場合、画面表示する内容を判断するのはAIか？それともタブレットか？
**A:** 表示内容の最終判断は**タブレット**が行います。AIはリスクを「検知」して通知する役割に徹し、タブレットがその通知を「蓄積」し、ユーザーからの指示に応じて「表示」します。

#### Q4. JSONファイルはどこに蓄積されるのか？
**A:** **クラウド上の安全なストレージ（Google Cloud Storage）**に蓄積されます。これにより、データの安全性と拡張性を担保します。

#### Q5. 応答速度はどうなるのか？タイムラグがどのくらいと想定されるのか？
**A:** 機能により異なりますが、いずれも対話の流れを妨げない速度を想定しています。
- **リアルタイム処理（文字起こし等）：** 1秒未満
- **インサイトパネル表示：** 1〜3秒程度
- **最終リスク一覧の生成：** 10〜30秒程度

#### Q6. フォトジェニックな会員専用リスクチェックシートを出力したいが、その機能はどこに作るべきか？
**A:** **AI側（クラウド側）**に作るべきです。タブレットの負荷を避け、デザインの柔軟性や将来の拡張性を確保するためです。
